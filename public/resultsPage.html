<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="../resultsPage.css">
    
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/1.11.1/css/dataTables.bootstrap5.min.css"
    />
    <script
      type="text/javascript"
      language="javascript"
      src="https://code.jquery.com/jquery-3.5.1.js"
    ></script>
    <script
      type="text/javascript"
      language="javascript"
      src="https://cdn.datatables.net/1.11.1/js/jquery.dataTables.min.js"
    ></script>
    <script
      type="text/javascript"
      language="javascript"
      src="https://cdn.datatables.net/1.11.1/js/dataTables.bootstrap5.min.js"
    ></script>
    <script type="text/javascript" src="../resultsPage.js"></script>
  </head>

  <body data-new-gr-c-s-check-loaded="14.1098.0" data-gr-ext-installed="">
    <input
      type="hidden"
      id="__yoroi_connector_api_injected_type"
      value="prod"
    />
    <div class="container">
      <nav>
        <ul>
          <li><a href="/">NOCAP NOTAMs</a></li>
        </ul>
      </nav>
    </div>

    <div class="container">
      <ul class="breadcrumb">
        <li><a href="#" onclick="window.location.href='/home';">Home</a></li>
        <li><a>NOTAMs</a></li>
      </ul>
    </div>

    <div style="margin-top: 5%"></div>

    <div class="container" style="width: 100%">
      <table id="example">
          <thead>
              <tr>
                  <th scope="col">ID</th>
                  <th scope="col">effectiveStart</th>
                  <th scope="col">effectiveEnd</th>
                  <th scope="col">text</th>
                  <th scope="col">category</th>
              </tr>
          </thead>
      </table>
    </div>

<!-- TABLE -->
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.1/css/dataTables.bootstrap5.min.css">
<script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.11.1/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.11.1/js/dataTables.bootstrap5.min.js"></script>

<script type="text/javascript" class="init">

$(document).ready(async function() {
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);
  const startingLocation = urlParams.get('startingLocation');
  const destinationLocation = urlParams.get('destinationLocation');
  console.log(startingLocation);
  console.log(destinationLocation);
  
  var call1 = await $.ajax({
         url: '/results/exampleData',
         data: {location: startingLocation}
  });
  var call2 = await $.ajax({
         url: '/results/exampleData',
         data: {location: destinationLocation}
  });

  var ldata = call1.data.concat(call2.data);

  // Create a new DataTable object
  table = $('#example').DataTable({
  "lengthMenu": [ [15, 50, 100, -1], [15, 50, 100, "All"] ],
  "pagingType": "simple",
  scrollY: 400,
  scrollCollapse: true,
  order: [[ 0, 'asc' ], [3, 'desc' ]],
  data: ldata,
  columns: [
    { data: 'properties.coreNOTAMData.notam.id' },
    { data: 'properties.coreNOTAMData.notam.effectiveStart' },
    { data: 'properties.coreNOTAMData.notam.effectiveEnd' },
    { data: 'properties.coreNOTAMData.notam.text' },
    { data: 'category' }
  ]
})
});

</script>

    <!-- <p style="padding: 5px 15px">
      This example creates a full page background image. Try to resize the
      browser window to see how it always will cover the full screen (when
      scrolled to top), and that it scales nicely on all screen sizes.
    </p> -->
  </body>
</html>
